import{r as n,j as e,Y as _,a as v,y as w}from"./app-_4GNH0o8.js";import{A as D}from"./AuthenticatedLayout-p4fAgZTm.js";import{M as V}from"./Modal-hx-PIZvS.js";import{P as B}from"./Pagination-C9wCc8yn.js";import{T as c}from"./TextInput-DjQBWOaJ.js";import{u as S,T as K}from"./toaster-CYEmhxcO.js";import{r as O,f as C}from"./utils-DtDAP0nT.js";import{A as k}from"./react-select-async.esm-DR5kc5vW.js";import"./ApplicationLogo-C8JTRArJ.js";import"./transition-DjUGaz8B.js";import"./x-DWI_0bja.js";import"./index-BjmvShgX.js";import"./useStateManager-7e1e8489.esm-MITv2YCY.js";function G({auth:i,po_header:p,queryParams:t={},message:o}){const[d,u]=n.useState(null),[j,N]=n.useState([]);t=t||{};const{toast:y}=S();n.useEffect(()=>{o!=null&&o.success&&y({title:o.success})},[]),n.useEffect(()=>{d&&N(d.pomaterials||[])},[d]);const l=(s,a)=>{a?(t[s]=a,t.page&&delete t.page):delete t[s],w.get(route("po.index"),t)},r=(s,a)=>{a.key==="Enter"&&l(s,a.target.value)},[f,h]=n.useState(!1),g=()=>{h(!1)},b=async s=>{if(!s)return[];try{return(await window.axios.get(route("vendor.search",{search:s}))).data.data.map(x=>({value:x.supplier,label:`${x.supplier} - ${x.name_1}`}))}catch(a){return console.log("Error fetching data:",a),[]}};return e.jsxs(D,{user:i.user,menus:i.menu,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Purchase Order List"}),children:[e.jsx(_,{title:"View PO "}),e.jsx(K,{}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-8xl mx-auto sm:px-6 lg:px-2",children:e.jsx("div",{className:"bg-gray-50 text-black overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-5 flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("table",{className:" table-auto w-full text-xs text-left rtl:text-right text-gray-500",children:[e.jsxs("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b-2 border-gray-500",children:[e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"px-3 py-2",children:" "}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.po_number_from,onBlur:s=>l("po_number_from",s.target.value),onKeyDown:s=>r("po_number_from",s),placeholder:"PO No. From"})}),e.jsx("th",{className:"px-1 py-2"}),e.jsx("th",{className:"px-1 py-2"}),e.jsx("th",{className:"px-1 py-2"}),e.jsx("th",{className:"px-1 py-2"}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{type:"date",className:"h-7 text-xs p-1 m-0",defaultValue:t.doc_date_from,onBlur:s=>l("doc_date_from",s.target.value),onKeyDown:s=>r("doc_date_from",s)})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{type:"date",className:"h-7 text-xs p-1 m-0",defaultValue:t.deliv_date_from,onBlur:s=>l("deliv_date_from",s.target.value),onKeyDown:s=>r("deliv_date_from",s)})})]}),e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"px-3 py-2",children:" "}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.po_number_to,onBlur:s=>l("po_number_to",s.target.value),onKeyDown:s=>r("po_number_to",s),placeholder:"PO No. To"})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.control_no,onBlur:s=>l("control_no",s.target.value),onKeyDown:s=>r("control_no",s),placeholder:"Control No."})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.plant,onBlur:s=>l("plant",s.target.value),onKeyDown:s=>r("plant",s),placeholder:"Plant"})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(k,{className:"p-2 w-full border-gray-500",cacheOptions:!0,defaultOptions:!0,loadOptions:b,value:t.vendor?{label:`${t.vendor} `,value:t.vendor}:null,onChange:s=>l("vendor",s==null?void 0:s.value),placeholder:"Vendor",styles:O})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.created_name,onBlur:s=>l("created_name",s.target.value),onKeyDown:s=>r("created_name",s),placeholder:"Created By"})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{type:"date",className:"h-7 text-xs p-1 m-0",defaultValue:t.doc_date_to,onBlur:s=>l("doc_date_to",s.target.value),onKeyDown:s=>r("doc_date_to",s)})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{type:"date",className:"h-7 text-xs p-1 m-0",defaultValue:t.deliv_date_to,onBlur:s=>l("deliv_date_to",s.target.value),onKeyDown:s=>r("deliv_date_to",s)})}),e.jsx("th",{className:"px-1 py-2",children:e.jsx(c,{className:"h-7 text-xs p-1 m-0",defaultValue:t.status,onBlur:s=>l("status",s.target.value),onKeyDown:s=>r("status",s),placeholder:"Status"})})]})]}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b-2 border-gray-500",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"px-3 py-2",children:" "}),e.jsx("th",{className:"px-3 py-2",children:" PO Number"}),e.jsx("th",{className:"px-3 py-2",children:" Control No."}),e.jsx("th",{className:"px-3 py-2",children:" Plant"}),e.jsx("th",{className:"px-3 py-2",children:" Vendor"}),e.jsx("th",{className:"px-3 py-2",children:" Created By"}),e.jsx("th",{className:"px-3 py-2",children:" Doc Date"}),e.jsx("th",{className:"px-3 py-2",children:" Deliv. Date"}),e.jsx("th",{className:"px-3 py-2",children:" Status"})]})}),e.jsx("tbody",{className:"text-xs text-black",children:p.data.length>0?p.data.map((s,a)=>{var x,m;return e.jsxs("tr",{className:"border-b "+(a%2===0?"bg-gray-100":"bg-white"),children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"radio",name:"sel",onClick:()=>{u(s),h(!0)}})}),e.jsx("td",{className:"px-3 py-2",children:s.po_number}),e.jsx("td",{className:"px-3 py-2",children:s.control_no}),e.jsxs("td",{className:"px-3 py-2",children:[s.plant," - ",(x=s.plants)==null?void 0:x.name1]}),e.jsxs("td",{className:"px-3 py-2",children:[s.vendor_id," - ",(m=s.vendors)==null?void 0:m.name_1]}),e.jsx("td",{className:"px-3 py-2",children:s.created_name}),e.jsx("td",{className:"px-3 py-2",children:s.doc_date}),e.jsx("td",{className:"px-3 py-2",children:s.deliv_date}),e.jsx("td",{className:"px-3 py-2",children:s.status}),e.jsx("td",{className:"px-3 py-2"})]},s.id)}):e.jsx("td",{className:"px-3 py-2 text-center",colSpan:8,children:"No Records Found"})})]}),e.jsx(B,{links:p.meta.links})]}),e.jsxs(V,{show:f,onClose:g,maxWidth:"3xl",children:[e.jsx("div",{className:"flex-1 p-5",children:e.jsxs("table",{className:"w-full text-xs text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b-2 border-gray-500",children:e.jsx("tr",{className:"text-nowrap",children:e.jsx("th",{className:"px-3 py-2",children:" "})})}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b-2 border-gray-500",children:e.jsxs("tr",{className:"text-nowrap",children:[e.jsx("th",{className:"px-3 py-2",children:"Stat"}),e.jsx("th",{className:"px-3 py-2",children:"itemNo"}),e.jsx("th",{className:"px-3 py-2",children:"Material "}),e.jsx("th",{className:"px-3 py-2",children:"Short Text"}),e.jsx("th",{className:"px-3 py-2",children:"Del Date"}),e.jsx("th",{className:"px-3 py-2",children:"Qty"}),e.jsx("th",{className:"px-3 py-2",children:"Unit"}),e.jsx("th",{className:"px-3 py-2",children:"Total Value"}),e.jsx("th",{className:"px-3 py-2",children:"Curr"}),e.jsx("th",{className:"px-3 py-2",children:"Requested By"})]})}),d&&e.jsx("tbody",{className:"text-xs text-black",children:j.map(s=>{var a;return e.jsxs("tr",{className:"bg-white border-b",children:[e.jsx("td",{className:"px-3 py-2",children:s.status}),e.jsx("td",{className:"px-3 py-2",children:s.item_no}),e.jsx("td",{className:"px-3 py-2",children:s.mat_code}),e.jsx("td",{className:"px-3 py-2",children:s.short_text}),e.jsx("td",{className:"px-3 py-2",children:(a=s.del_date)==null?void 0:a.toString()}),e.jsx("td",{className:"px-3 py-2",children:s.po_qty}),e.jsx("td",{className:"px-3 py-2",children:s.unit}),e.jsx("td",{className:"px-3 py-2",children:C(s.total_value??0)}),e.jsx("td",{className:"px-3 py-2",children:s.currency}),e.jsx("td",{className:"px-3 py-2",children:s.requested_by})]},s.id)})})]})}),e.jsx("div",{className:"flex flex-row-reverse pt-2",children:e.jsx("div",{children:(d==null?void 0:d.id)&&e.jsx(v,{href:route("po.edit",d.po_number),className:" p-3 m-3 bg-yellow-500 inline-flex items-center justify-center whitespace-nowrap rounded-md text-xs font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input  hover:bg-yellow-400 hover:text-accent-foreground hover:border-gray-500",children:"Display PO"})})})]})]})})})})]})}export{G as default};
