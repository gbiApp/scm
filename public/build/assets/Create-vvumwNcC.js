import{r as u,W as F,j as r}from"./app-B0xb5DNB.js";import{M as S}from"./Modal-S2IAVDm4.js";import{L as l,I as n}from"./input-D1d6vgBV.js";import{A as h}from"./react-select-async.esm-CUt-jINI.js";import{B as x}from"./button-BU5iTi24.js";import{S as g}from"./react-select.esm-CWLcAUIb.js";import"./transition-nICMswLC.js";import"./index-Cm-6xkS1.js";import"./utils-CG2i-Alp.js";import"./useStateManager-7e1e8489.esm-z-LzugSL.js";function T({p_plants:v}){const[f,o]=u.useState(!1),[p,j]=u.useState([]),{data:a,setData:t,post:y,processing:w,reset:d,errors:M}=F({vendor:"",plant:"",mat_code:"",currency:"PHP",price:0,per_unit:0,uom:"",valid_from:new Date().toLocaleDateString(),valid_to:new Date("9999-12-31").toLocaleDateString(),min_order_qty:0}),N=e=>{e.preventDefault(),y(route("net_price.store"),{preserveScroll:!0,onSuccess:()=>i(),onFinish:()=>d()})},i=()=>{o(!1),d()},_=async e=>{if(!e)return[];try{return(await window.axios.get(route("vendor.search",{search:e}))).data.data.map(c=>({value:c.supplier,label:`${c.supplier} - ${c.name_1}`}))}catch(s){return console.log("Error fetching data:",s),[]}},b=async e=>{if(!e)return[];try{return(await window.axios.get(route("material.search",{search:e}))).data.data.map(c=>({value:c.mat_code,label:`${c.mat_code} - ${c.mat_desc}`}))}catch(s){return console.log("Error fetching data:",s),[]}},C=async e=>{if(!e)return[];try{const s=await window.axios.get(route("uom.search",{search:e}));console.log(s.data.data);const c=s.data.data.map(m=>({value:m.alt_uom,label:m.alt_uom}));j(c)}catch(s){console.log("Error fetching data:",s)}};return r.jsxs("section",{className:"space-y-6",children:[r.jsx(x,{onClick:()=>o(!0),children:"Add"}),r.jsx(S,{show:f,onClose:i,maxWidth:"lg",children:r.jsx("form",{onSubmit:N,children:r.jsxs("div",{className:"m-2",children:[r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"vendor",children:"Vendor"}),r.jsx(h,{className:"m-2 w-full border-gray-500",cacheOptions:!0,defaultOptions:!0,loadOptions:_,value:a.vendorChoice,onChange:e=>t({...a,vendor:e==null?void 0:e.value,vendorChoice:e}),placeholder:"Select Vendor",required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"plant",children:"Plant"}),r.jsx(g,{id:"plant",className:"m-2 w-full border-gray-500",value:a.plantChoice,options:v,onChange:e=>t({...a,plant:e==null?void 0:e.value,plantChoice:e}),placeholder:"Select Plant",required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"material",children:"Material"}),r.jsx(h,{className:"m-2 w-full border-gray-500",cacheOptions:!0,defaultOptions:!0,loadOptions:b,value:a.mat_codeChoice,onChange:e=>{t({...a,mat_code:e==null?void 0:e.value,mat_codeChoice:e}),C(e==null?void 0:e.value)},placeholder:"Select Material",required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"uom",children:"Unit of Measure"}),r.jsx(g,{id:"uom",className:"m-2 w-full border-gray-500",value:a.uomChoice,options:p,onChange:e=>t({...a,uom:e==null?void 0:e.value,uomChoice:e}),placeholder:"Select UOM",required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"currency",children:"Currency"}),r.jsx(n,{className:"m-2 w-full border-gray-300 h-10 ",type:"text",id:"currency",defaultValue:a.currency,onChange:e=>t("currency",e.target.value)})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"price",children:"Price"}),r.jsx(n,{className:"m-2 w-full border-gray-300 h-10 ",type:"number",id:"price",onChange:e=>t("price",parseFloat(e.target.value)),required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"price",children:"Per Unit"}),r.jsx(n,{className:"m-2 w-full border-gray-300 h-10 ",type:"number",id:"price",onChange:e=>t("per_unit",parseFloat(e.target.value)),required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-3/12 text-sm content-center text-right",htmlFor:"validFrom",children:"Min Order Qty"}),r.jsx(n,{className:"m-2 w-full border-gray-300 h-10 ",type:"number",id:"minOrderQty",onChange:e=>t("min_order_qty",parseFloat(e.target.value)),required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-1/5 text-sm content-center text-right",htmlFor:"validFrom",children:"Valid From"}),r.jsx(n,{className:"m-2 w-4/12 border-gray-300 h-10 ",type:"date",id:"validFrom",defaultValue:a.valid_from,onChange:e=>t("valid_from",e.target.value),required:!0})]}),r.jsxs("div",{className:"flex ",children:[r.jsx(l,{className:"p-3 w-1/5 text-sm content-center text-right",htmlFor:"validTo",children:"Valid To"}),r.jsx(n,{className:"m-2 w-4/12 border-gray-300 h-10 ",type:"date",id:"validTo",defaultValue:a.valid_to,onChange:e=>t("valid_to",e.target.value),required:!0})]}),r.jsx("div",{className:"grid justify-items-center m-3",children:r.jsx(x,{variant:"outline",disabled:w,className:"bg-[#f8c110]  hover:border-gray-500 hover:bg-[#f8c110] w-60",children:"Save"})})]})})})]})}export{T as default};
